{% extends 'base.html' %}
{% block content %}
{% load static %}
{% load crispy_forms_tags %}
<div class="container mt-5 pb-5">
  <div class="row">
    <div class="col-4 text-center">
      <img src="{% static 'images/about.jpg' %}" class="img-fluid" alt="Physiotherapist Image">
    </div>
    <div class="col-8">
      <h2>{{ about.title }}</h2>
      {{ about.content | safe }}
    </div>
  </div>

  <!-- Introduction -->
  <div class="row mt-5">
    <div class="col-12">
      <h2>About Me</h2>
      <p>I am a dedicated and experienced physiotherapist, committed to helping my clients achieve their health and wellness goals. With years of experience in treating a variety of conditions, I offer personalized treatment plans tailored to each individual’s needs.</p>
    </div>
  </div>

  <!-- Philosophy -->
  <div class="row mt-5">
    <div class="col-12">
      <h2>My Philosophy</h2>
      <p>I believe in a holistic approach to health and well-being, focusing on individualized treatment plans for each patient. My goal is to help you achieve optimal health through a combination of hands-on therapy, exercise, and education.</p>
    </div>
  </div>

  <!-- displaying Django messages -->
  <div class="row mt-5">
    <div class="col-md-8">
      {% for message in messages %}
      <div class="alert {{ message.tags }} alert-dismissible fade show" id="msg" role="alert">
        {{ message | safe }}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
      {% endfor %}
    </div>
  </div>

  <!-- Contact Form -->
  <div class="row mt-5 contact-form-container">
    <div class="col-md-8">
      <h3>Contact Us</h3>
      <p>To book an appointment drop us a message using the contact form below or use our online appointment booking system. We guarantee to respond to your message within an hour between 8 am and 6 pm. If you’re unable to attend your physiotherapy appointment, please let us know at least 24 hours before.</p>
      <form method="post" action="{% url 'about' %}">
        {{ contact_form|crispy }}
        {% csrf_token %}
        <button class="btn btn-secondary" type="submit">Submit</button>
      </form>
    </div>
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function() {
  const form = document.querySelector("form");
  const formContainer = document.querySelector(".contact-form-container");
  
  form.addEventListener("submit", function(event) {
    event.preventDefault();
    const formData = new FormData(form);
    fetch(form.action, {
      method: "POST",
      body: formData,
      headers: {
        "X-Requested-With": "XMLHttpRequest"
      }
    })
    .then(response => response.json())
    .then(data => {
      if (data.success) {
        formContainer.innerHTML = '<div class="alert alert-success" role="alert">Your message has been sent successfully!</div>';
      }
    })
    .catch(error => console.error('Error:', error));
  });
});
</script>

{% endblock content %}